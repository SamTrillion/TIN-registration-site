<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Your Nigerian TIN & Certificate - Fast & Easy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght(400;600;800)&display=swap" rel="stylesheet">
    <style>
        /* Define custom colors and font based on the flyer */
        :root {
            --color-primary: #043D2A; /* Deep Green/Teal */
            --color-secondary: #0A3358; /* Dark Navy Blue */
            --color-accent: #28a745; /* Bright WhatsApp Green */
        }
        .text-primary { color: var(--color-primary); }
        .bg-primary { background-color: var(--color-primary); }
        .text-secondary { color: var(--color-secondary); }
        .bg-secondary { background-color: var(--color-secondary); }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }

        /* Custom shadow for the main offer box */
        .offer-box-shadow {
            box-shadow: 0 10px 25px -3px rgba(10, 51, 88, 0.2), 0 4px 6px -2px rgba(10, 51, 88, 0.05);
        }

        /* Styling the animated CTA button */
        .whatsapp-cta {
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        .whatsapp-cta:hover {
            transform: scale(1.05);
            animation: none;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(40, 167, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
        }
        
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--color-primary);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <script>
        // --- Gemini API Configuration ---
        const GEMINI_API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=";
        // IMPORTANT: When hosting externally (e.g., GitHub Pages), you MUST insert your own API key here.
        // Get your key from Google AI Studio.
        const API_KEY = "AIzaSyBpAV7ri0_3fjMDz9zFXZRe2sHwFG0YDl0"; 
        
        // --- Core Application Logic ---
        document.addEventListener('DOMContentLoaded', function() {
            // 1. WhatsApp Link Setup
            const phoneNumber = '2349085006059'; 
            const message = encodeURIComponent("Yes! I want to get my Nigerian TIN and Certificate instantly for N3000. I need the fast track service.");
            const whatsappLink = `https://wa.me/${phoneNumber}?text=${message}`;
            
            document.querySelectorAll('.whatsapp-link').forEach(button => {
                button.href = whatsappLink;
            });

            // 2. Event Listener for LLM feature
            document.getElementById('fetchRequirementsBtn').addEventListener('click', fetchTINRequirements);
        });

        // --- LLM Feature Logic ---

        // Exponential backoff utility for retrying API calls
        async function fetchWithBackoff(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 && i < maxRetries - 1) {
                        // Retry with exponential delay
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    if (!response.ok) {
                        const errorBody = await response.json();
                        throw new Error(`API Error: ${response.status} - ${errorBody.error.message}`);
                    }
                    return response;
                } catch (error) {
                    if (i === maxRetries - 1) throw error;
                    // Log error internally but do not display console messages for retries
                }
            }
        }

        async function fetchTINRequirements() {
            const queryElement = document.getElementById('requirementsQuery');
            const outputElement = document.getElementById('requirementsOutput');
            const button = document.getElementById('fetchRequirementsBtn');
            const query = queryElement.value.trim();

            if (!query) {
                outputElement.innerHTML = '<p class="text-red-500">Please describe your situation (e.g., "I am a freelancer in Lagos" or "I need a TIN for my registered company").</p>';
                return;
            }

            // Check if API key is provided
            if (API_KEY.includes('PASTE YOUR GOOGLE AI STUDIO API KEY HERE') || API_KEY === '') {
                 outputElement.innerHTML = '<p class="text-red-600 font-bold">Error: API Key Missing. Please edit index.html and insert your Google AI Studio API key for this feature to work on external hosting.</p>';
                 return;
            }

            // Set loading state
            button.disabled = true;
            button.innerHTML = '<div class="loader mr-2"></div> Fetching Advice...';
            outputElement.innerHTML = '';
            
            // --- UPDATED SYSTEM INSTRUCTION (Absolute Restriction) ---
            const systemPrompt = "You are a Nigerian Tax Compliance Assistant. Your **ONLY** allowed output is a single, unnumbered bulleted list (using markdown '*') of the **required documents and essential information** the user must submit to a third-party service provider for TIN registration. The list must be accurate and derived from official FIRS/CAC requirements for the user's specific status. You MUST start the list immediately. Do NOT include any introductory text, closing remarks, registration steps, processing details, links, or mention costs or free alternatives. Output the bulleted list only.";

            const payload = {
                contents: [{ parts: [{ text: query }] }],
                // Enable Google Search grounding for real-time information
                tools: [{ "google_search": {} }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };
            
            try {
                const response = await fetchWithBackoff(`${GEMINI_API_URL}${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    const text = candidate.content.parts[0].text;
                    
                    let sourcesHtml = '';
                    const groundingMetadata = candidate.groundingMetadata;
                    if (groundingMetadata && groundingMetadata.groundingAttributions) {
                        const sources = groundingMetadata.groundingAttributions 
                            .map(attribution => ({
                                uri: attribution.web?.uri,
                                title: attribution.web?.title,
                            }))
                            .filter(source => source.uri && source.title);
                        
                        if (sources.length > 0) {
                            sourcesHtml = '<div class="mt-4 p-3 bg-gray-100 rounded-lg text-sm">';
                            sourcesHtml += '<p class="font-semibold text-gray-700 mb-2">Sources for Grounding (Learn More):</p>';
                            sourcesHtml += '<ul class="list-disc ml-4 space-y-1">';
                            sources.forEach((source, index) => {
                                sourcesHtml += `<li><a href="${source.uri}" target="_blank" class="text-blue-600 hover:text-blue-800">${source.title || 'Source ' + (index + 1)}</a></li>`;
                            });
                            sourcesHtml += '</ul></div>';
                        }
                    }

                    // Convert markdown response to basic HTML (for lists and paragraphs)
                    let formattedText = text;
                    formattedText = formattedText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); // Bold
                    // Replace simple list items (Markdown '*' or '-') with <li>, handling potential multi-line list items
                    formattedText = formattedText.split('\n').map(line => {
                        if (line.match(/^(\*|\-)\s/)) {
                            return `<li>${line.substring(line.match(/^(\*|\-)\s/).index + line.match(/^(\*|\-)\s/)[0].length).trim()}</li>`;
                        }
                        return line;
                    }).join('\n');
                    
                    // Wrap multiple list items in ul tags and paragraphs in p tags
                    const lines = formattedText.split('\n');
                    let inList = false;
                    let htmlParts = [];
                    lines.forEach(line => {
                        if (line.startsWith('<li>')) {
                            if (!inList) {
                                htmlParts.push('<ul>');
                                inList = true;
                            }
                            htmlParts.push(line);
                        } else {
                            if (inList) {
                                htmlParts.push('</ul>');
                                inList = false;
                            }
                            if (line.trim()) {
                                htmlParts.push(`<p>${line.trim()}</p>`);
                            }
                        }
                    });
                    if (inList) {
                        htmlParts.push('</ul>');
                    }
                    formattedText = htmlParts.join('');
                    
                    // Ensure the output title is clear that this is a list of requirements
                    outputElement.innerHTML = `
                        <div class="p-4 bg-green-50 rounded-xl border border-green-200">
                            <h4 class="text-xl font-bold text-primary mb-3">Your Required Documents/Information:</h4>
                            <div class="text-gray-700 space-y-3">${formattedText}</div>
                            ${sourcesHtml}
                        </div>
                    `;

                } else {
                    outputElement.innerHTML = '<p class="text-red-500">Sorry, I could not generate the compliance advice. Please try a different query or contact support via WhatsApp.</p>';
                }

            } catch (error) {
                console.error("Gemini API Error:", error);
                outputElement.innerHTML = `<p class="text-red-500">An error occurred: ${error.message}. Please check your connection or try again.</p>`;
            } finally {
                // Reset button state
                button.disabled = false;
                button.innerHTML = 'âœ¨ Get Requirements Advice';
            }
        }

    </script>
</head>
<body class="antialiased min-h-screen">

    <!-- Fixed WhatsApp CTA Button for Mobile/Scroll -->
    <a href="#" class="whatsapp-link fixed bottom-4 right-4 z-50 bg-[#25D366] hover:bg-[#128C7E] text-white font-extrabold py-3 px-6 rounded-full text-lg shadow-lg whatsapp-cta md:hidden flex items-center space-x-2">
        <!-- WhatsApp Icon (inline SVG) -->
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12.001 0C6.113 0 1.258 4.855 1.258 10.743c0 1.884.498 3.738 1.455 5.372l-1.63 4.97c-.053.161.026.335.187.388.049.017.1.025.15.025.111 0 .216-.046.284-.127l5.053-3.134c1.558.835 3.32 1.272 5.092 1.272 5.888 0 10.743-4.855 10.743-10.743C22.744 4.855 17.889 0 12.001 0zm4.512 14.128c-.024.062-.075.102-.132.128-.216.096-.443.144-.67.144-.069 0-.138-.007-.206-.02-.152-.029-.267-.066-.372-.112-1.306-.583-2.607-1.34-3.874-2.273-.205-.15-.401-.31-.588-.479-.115-.107-.22-.218-.316-.334-.143-.166-.277-.34-.397-.521-.13-.197-.245-.407-.345-.632-.122-.276-.226-.576-.307-.899-.088-.352-.132-.712-.132-1.077 0-.365.044-.725.132-1.077.081-.323.185-.623.307-.899.1-.225.215-.435.345-.632.12-.181.254-.355.397-.521.096-.116.201-.227.316-.334.187-.169.383-.329.588-.479 1.267-.933 2.568-1.69 3.874-2.273.105-.046.22-.083.372-.112.068-.013.137-.02.206-.02.227 0 .454.048.67.144.057.026.108.066.132.128.093.242.14.498.14.757 0 .26-.047.516-.14.757z"/></svg>
        <span>Chat Now</span>
    </a>
    
    <!-- Main Content Container -->
    <div class="max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
        
        <!-- Header Section -->
        <header class="text-center mb-12">
            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold text-secondary tracking-tight leading-tight">
                GET YOUR NIGERIAN <span class="text-primary">TIN!</span>
            </h1>
            <p class="mt-4 text-xl sm:text-2xl text-gray-700 font-medium">
                Fast & Easy Taxpayer Identification Number Registration Service
            </p>
            <div class="mt-2 text-sm text-red-600 font-semibold border border-red-300 bg-red-50 p-2 rounded-lg inline-block">
                <span role="img" aria-label="alert">ðŸš¨</span> New Policy Alert: TIN is now mandatory and linked to bank accounts! Don't wait!
            </div>
        </header>

        <!-- Main Offer and Illustration Section -->
        <div class="mb-12">
            
            <!-- Offer Box (Now full width) -->
            <div class="w-full p-6 bg-white rounded-xl offer-box-shadow border-t-8 border-primary">
                
                <h2 class="text-3xl font-bold mb-4 text-secondary text-center">Avoid the Queues! Get Certified.</h2>
                
                <!-- Fee Section -->
                <div class="my-6 p-4 rounded-lg bg-primary text-white text-center">
                    <p class="text-xl font-semibold opacity-80">One-Time Fee:</p>
                    <p class="text-5xl font-extrabold">â‚¦3,500</p>
                </div>
                
                <!-- Benefits List -->
                <ul class="space-y-3 text-gray-700">
                    <li class="flex items-start">
                        <span class="text-primary font-bold text-xl mr-2 mt-0.5">&#10003;</span>
                        <span><span class="font-bold text-primary">Instant Generation:</span> Skip the long queue and get your TIN process started immediately.</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-primary font-bold text-xl mr-2 mt-0.5">&#10003;</span>
                        <span><span class="font-bold text-primary">Original Certificate:</span> Receive your official, Government Accredited Certificate delivered directly to you.</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-primary font-bold text-xl mr-2 mt-0.5">&#10003;</span>
                        <span><span class="font-bold text-primary">Verified & Ready to Use:</span> Your official, government-authenticated TIN and certificate are processed with urgency and ready for immediate deployment in all your banking and business needs.</span>
                    </li>
                </ul>
                
                <!-- Primary Desktop CTA Button - Width limited to max-w-sm and centered (mx-auto) -->
                <a href="#" class="whatsapp-link mt-8 max-w-sm mx-auto hidden md:flex items-center justify-center space-x-2 bg-[#25D366] hover:bg-primary text-white font-extrabold py-4 rounded-xl text-xl shadow-lg hover:shadow-xl transition duration-300">
                    <!-- WhatsApp Icon (inline SVG) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12.001 0C6.113 0 1.258 4.855 1.258 10.743c0 1.884.498 3.738 1.455 5.372l-1.63 4.97c-.053.161.026.335.187.388.049.017.1.025.15.025.111 0 .216-.046.284-.127l5.053-3.134c1.558.835 3.32 1.272 5.092 1.272 5.888 0 10.743-4.855 10.743-10.743C22.744 4.855 17.889 0 12.001 0zm4.512 14.128c-.024.062-.075.102-.132.128-.216.096-.443.144-.67.144-.069 0-.138-.007-.206-.02-.152-.029-.267-.066-.372-.112-1.306-.583-2.607-1.34-3.874-2.273-.205-.15-.401-.31-.588-.479-.115-.107-.22-.218-.316-.334-.143-.166-.277-.34-.397-.521-.13-.197-.245-.407-.345-.632-.122-.276-.226-.576-.307-.899-.088-.352-.132-.712-.132-1.077 0-.365.044-.725.132-1.077.081-.323.185-.623.307-.899.1-.225.215-.435.345-.632.12-.181.254-.355.397-.521.096-.116.201-.227.316-.334.187-.169.383-.329.588-.479 1.267-.933 2.568-1.69 3.874-2.273.105-.046.22-.083.372-.112.068-.013.137-.02.206-.02.227 0 .454.048.67.144.057.026.108.066.132.128.093.242.14.498.14.757 0 .26-.047.516-.14.757z"/></svg>
                    <span>Click Here to Start Now</span>
                </a>
            </div>
        </div>

        <!-- How It Works Section -->
        <section class="mt-16 text-center">
            <h2 class="text-3xl font-bold text-secondary mb-8 border-b-2 border-primary pb-2 inline-block">How It Works</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                
                <div class="p-6 bg-white rounded-xl shadow-md border-b-4 border-primary hover:shadow-lg transition duration-300">
                    <div class="text-4xl text-primary font-extrabold mb-2">1</div>
                    <h3 class="text-xl font-bold text-secondary mb-3">Send Your Details</h3>
                    <p class="text-gray-600">Click the WhatsApp button and share the required information (ID, Name, etc.) with our team.</p>
                </div>
                
                <div class="p-6 bg-white rounded-xl shadow-md border-b-4 border-primary hover:shadow-lg transition duration-300">
                    <div class="text-4xl text-primary font-extrabold mb-2">2</div>
                    <h3 class="text-xl font-bold text-secondary mb-3">Pay the â‚¦3,500 Fee</h3>
                    <p class="text-gray-600">Make the one-time service payment of â‚¦3,500 for fast-track processing and certification.</p>
                </div>
                
                <div class="p-6 bg-white rounded-xl shadow-md border-b-4 border-primary hover:shadow-lg transition duration-300">
                    <div class="text-4xl text-primary font-extrabold mb-2">3</div>
                    <h3 class="text-xl font-bold text-secondary mb-3">Get Your TIN & Certificate</h3>
                    <p class="text-gray-600">Receive your official TIN and the Government Accredited Certificate directly to your WhatsApp/Email.</p>
                </div>
            </div>
        </section>

        <!-- GEMINI LLM Feature: TIN Requirements Assistant -->
        <section class="mt-16 p-8 bg-white rounded-xl shadow-2xl border-2 border-green-500">
            <h2 class="text-3xl font-bold text-secondary mb-4 flex items-center justify-center space-x-2">
                <span class="text-green-500">âœ¨</span> 
                <span>TIN Requirements Assistant</span>
                <span class="text-green-500">âœ¨</span>
            </h2>
            <p class="text-gray-600 mb-4 text-center max-w-2xl mx-auto">
                Not sure exactly what you need? Describe your status (e.g., "I am an individual with a business name," or "I am a new company in Kano") and our AI assistant will fetch the latest official document requirements.
            </p>

            <div class="space-y-4">
                <textarea id="requirementsQuery" rows="3" placeholder="Example: I need a TIN for my side hustle selling clothes in Port Harcourt." 
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary resize-none"></textarea>
                
                <button id="fetchRequirementsBtn" 
                    class="w-full flex items-center justify-center bg-primary hover:bg-secondary text-white font-bold py-3 px-4 rounded-xl transition duration-300 shadow-lg">
                    âœ¨ Get Requirements Advice
                </button>

                <!-- Output Area -->
                <div id="requirementsOutput" class="mt-4 min-h-[100px]">
                    <!-- AI response will be injected here -->
                </div>
            </div>
        </section>


        <!-- Footer / Contact Info -->
        <footer class="mt-16 pt-8 border-t border-gray-300 text-center text-gray-600">
            <p class="mb-2">Visit us today! Talk to a representative:</p>
            <div class="flex justify-center text-lg font-semibold">
                <!-- WhatsApp Link (Primary CTA) -->
                <a href="#" class="whatsapp-link text-[#25D366] hover:text-primary transition duration-200">
                    <span role="img" aria-label="whatsapp">ðŸ’¬</span> Chat with us on WhatsApp
                </a>
            </div>
            <p class="mt-4 text-sm">&copy; 2025 TRILLION TECH. All Rights Reserved. Professional, Accredited Service.</p>
        </footer>
    </div>
</body>

</html>
